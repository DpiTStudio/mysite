"""
Модуль admin.py приложения accounts

Этот файл настраивает административную панель Django для управления пользователями.
Определяет, как модель User будет отображаться и редактироваться в админке.
"""

# Импорт модуля административной панели Django
from django.contrib import admin
# Импорт стандартного администратора пользователей для наследования
from django.contrib.auth.admin import UserAdmin as BaseUserAdmin
# Импорт кастомной модели пользователя
from .models import User


@admin.register(User)
class UserAdmin(BaseUserAdmin):
    """
    Административный класс для управления пользователями в админке Django.
    
    Наследуется от BaseUserAdmin, который предоставляет стандартную функциональность
    для управления пользователями (создание, редактирование, удаление, смена пароля).
    
    Расширяет стандартный функционал:
    - Добавляет дополнительные поля в список отображения
    - Добавляет фильтры для удобной навигации
    - Добавляет поля поиска
    - Делает некоторые поля только для чтения
    - Добавляет секцию с дополнительными полями в форму редактирования
    """
    
    # Поля, отображаемые в списке пользователей в админке
    # Порядок полей определяет порядок колонок в таблице
    list_display = ("username", "email", "phone", "first_name", "last_name", "is_staff", "created_at")
    
    # Поля для фильтрации списка пользователей
    # В правой панели админки появятся фильтры по этим полям
    list_filter = ("is_staff", "is_superuser", "is_active", "created_at")
    
    # Поля, по которым можно искать пользователей
    # В админке появится строка поиска, которая ищет по этим полям
    search_fields = ("username", "email", "phone", "first_name", "last_name")
    
    # Поля, доступные только для чтения в форме редактирования
    # Эти поля нельзя изменить через админку (они заполняются автоматически)
    readonly_fields = ("created_at", "updated_at", "date_joined", "last_login")
    
    # Группировка полей в форме редактирования пользователя
    # BaseUserAdmin.fieldsets содержит стандартные секции (Основная информация, Права доступа и т.д.)
    # Мы добавляем новую секцию "Дополнительная информация" с нашими полями
    fieldsets = BaseUserAdmin.fieldsets + (
        ("Дополнительная информация", {
            # Поля, которые будут отображаться в этой секции
            "fields": ("phone", "avatar", "created_at", "updated_at")
        }),
    )
