# Документация приложения News

Приложение `news` отвечает за публикацию новостей, статей и автоматическую генерацию событий на сайте.

## Обзор
Это приложение позволяет создавать новости вручную через админку, а также имеет мощную систему **сигналов**, которая автоматически генерирует новостные поводы при добавлении работ в портфолио, публикации отзывов или создании новых страниц. Поддерживает RSS-ленты, поиск и категоризацию.

---

## Описание файлов

### 1. `admin.py`
Настройка административной панели.

**Классы:**
- `NewsCategoryAdmin`: Управление категориями.
    - Особенности: Настройка SEO, изменение шапки (Header) для категории, сортировка.
- `NewsAdmin`: Управление новостями.
    - Особенности: Фильтрация по дате и категории, поиск по контенту, группировка полей (SEO, Дополнительно).

### 2. `apps.py`
Конфигурация приложения.
- `ready()`: Метод переопределен для импорта модуля `news.signals`. Это критически важно для работы автоматической генерации новостей.

### 3. `context_processors.py`
Глобальные данные для шаблонов.
- `latest_news(request)`: Возвращает 3 последние новости и список категорий (с подсчетом кол-ва новостей в каждой). Это позволяет отображать блок "Последние новости" в футере или сайдбаре на любой странице сайта.

### 4. `feeds.py`
Генерация RSS-лент.
- `LatestNewsFeed(Feed)`: Создает XML-ленту последних 20 новостей, доступную по адресу `/news/feed/`.

### 5. `forms.py`
Формы для админки.
- `NewsForm` и `NewsCategoryForm`: Подключают визуальный редактор **TinyMCE** для полей с контентом и описанием.

### 6. `models.py`
Структура данных.
- `NewsCategory(ActiveModel, SEOModel, HeaderModel)`: Категория новостей.
- `News(ActiveModel, SEOModel, TimestampModel)`: Сама новость.
- `Comment`: Модель комментариев к новостям.

### 7. `signals.py`
**Ключевой файл автоматизации.** Содержит логику "реакции" на события в других приложениях.

**Обработчик `auto_create_news`:**
Подписан на сигнал `post_save`. Срабатывает при сохранении моделей из других приложений:
1. **Portfolio**: Создает новость при добавлении/обновлении работы.
2. **Review**: Создает новость при одобрении отзыва.
3. **Page**: Создает новость при создании/обновлении страницы.

### 8. `views.py`
Логика отображения.
- `news_list(request)`: Список всех новостей с пагинацией.
- `news_by_category(request, category_slug)`: Фильтрация новостей по категории.
- `news_search(request)`: Поиск по заголовку, описанию и контенту.
- `news_detail(request, slug)`: Страница одной новости.
