# Инструкция по использованию системы группировки новостей

## Для администратора

### Как это работает автоматически

1. **Добавление работы в портфолио:**
   - Зайдите в админку → Портфолио → Добавить работу
   - Заполните данные и сохраните
   - Система автоматически создаст или обновит дневную новость для текущей даты
   - Событие "Добавлена новая работа: [название]" будет добавлено к новости

2. **Одобрение отзыва:**
   - Зайдите в админку → Отзывы → выберите отзыв
   - Измените статус на "Одобрено" и сохраните
   - Система добавит событие "Новый отзыв от [имя]" к дневной новости

3. **Создание/обновление страницы:**
   - Зайдите в админку → Страницы → добавьте или измените страницу
   - Система добавит соответствующее событие к дневной новости

### Просмотр дневных новостей

1. Перейдите в админку → Новости → Новости
2. Вы увидите список новостей с заголовками вида "События ДД.ММ.ГГГГ - Категория"
3. В колонке "События" отображается количество событий за день
4. Нажмите на новость для редактирования

### Редактирование событий

1. Откройте дневную новость в админке
2. Внизу страницы вы увидите таблицу "События дня"
3. Здесь можно:
   - Изменить порядок отображения событий (поле "Порядок")
   - Отредактировать заголовок и описание события
   - Добавить или изменить изображение события
   - Удалить событие

### Ручное создание новости

Если вы хотите создать новость вручную:

1. Перейдите в админку → Новости → Добавить новость
2. Заполните обязательные поля:
   - Заголовок
   - URL (slug)
   - Категория
   - **Дата новости** - выберите дату, к которой относится новость
   - Контент
3. Сохраните новость
4. После сохранения вы можете добавить события через inline-форму

**Важно:** Система не позволит создать две новости с одинаковой датой в одной категории.

### Управление событиями отдельно

Если нужно управлять событиями отдельно от новостей:

1. Перейдите в админку → Новости → События дня
2. Здесь вы можете:
   - Просмотреть все события
   - Фильтровать по типу события, категории, дате
   - Искать по заголовку и описанию
   - Редактировать или удалять события

## Примеры использования

### Пример 1: Активный рабочий день

**Утро (10:00):**
- Добавлена работа "Сайт для ресторана"
- Создана новость "События 06.01.2026 - Веб-разработка"
- Добавлено событие #1

**День (14:00):**
- Добавлена работа "Мобильное приложение"
- Новость "События 06.01.2026 - Веб-разработка" обновлена
- Добавлено событие #2

**Вечер (18:00):**
- Одобрен отзыв от клиента
- Создана новость "События 06.01.2026 - Отзывы"
- Добавлено событие #1

**Результат:** Две дневные новости с несколькими событиями каждая.

### Пример 2: Обновление контента

Когда вы добавляете события, контент новости автоматически обновляется и включает:
- Заголовок "События дня ДД.ММ.ГГГГ"
- Количество событий
- Список всех событий с:
  - Порядковым номером
  - Заголовком события
  - Временем создания
  - Описанием события

## Советы по использованию

1. **Не редактируйте контент новости вручную** - он автоматически генерируется из событий
2. **Используйте поле "Порядок"** в событиях для управления последовательностью отображения
3. **Добавляйте изображения к событиям** - они могут отображаться на фронтенде
4. **Проверяйте дату новости** при ручном создании, чтобы избежать конфликтов
5. **Используйте фильтры** в админке для быстрого поиска нужных новостей и событий

## Устранение проблем

### Проблема: Не создается новость при добавлении работы

**Решение:**
1. Проверьте, что работа активна (is_active = True)
2. Проверьте логи сервера на наличие ошибок
3. Убедитесь, что у категории портфолио есть название

### Проблема: События дублируются

**Решение:**
1. Система имеет защиту от дублей по заголовку события
2. Если события дублируются, проверьте, не сохраняете ли вы объект несколько раз подряд
3. Удалите дубликаты вручную через админку

### Проблема: Не могу создать новость для определенной даты

**Решение:**
1. Проверьте, не существует ли уже новость для этой даты в выбранной категории
2. Если существует - отредактируйте её вместо создания новой
3. Или выберите другую категорию

## Дополнительная информация

Подробное техническое описание см. в [README_DAILY_NEWS.md](./README_DAILY_NEWS.md)
