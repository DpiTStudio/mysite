# Документация приложения Portfolio

Приложение `portfolio` объединяет в себе управление портфолио (выполненными работами) и услугами (прайс-листом) сайта.

## Обзор
Приложение использует единую модель данных для хранения как примеров работ, так и предлагаемых услуг. Это позволяет гибко управлять контентом, разделяя его логически с помощью флагов. Также реализована функциональность заказа услуг через форму обратной связи.

---

## Описание файлов

### 1. `admin.py`
Настройка административной панели.

**Классы:**
- `PortfolioCategoryAdmin`: Управление категориями портфолио/услуг. Аналогично новостям, поддерживает кастомные шапки (Header) для каждой категории.
- `PortfolioAdmin`: Управление работами и услугами.
    - **Особенности:**
        - Фильтры по типу записи (`is_service`: Работа или Услуга).
        - Поля цен (`price`, `min_price`, `max_price`) отображаются в списке и форме.
- `ServiceOrderAdmin`: Интерфейс для просмотра заявок на услуги.
    - Позволяет менять статус заявки (Ожидает -> В обработке -> Завершено).
    - Только чтение дат создания/обновления.

### 2. `apps.py`
Конфигурация приложения.
- `verbose_name = "Портфолио"`: Имя в админке.

### 3. `context_processors.py`
Глобальные данные.
- `latest_portfolio(request)`: Возвращает 3 последние выполненные работы (не услуги) для отображения в футере или виджетах на любой странице.

### 4. `forms.py`
Формы приложения.
- `PortfolioForm` / `PortfolioCategoryForm`: Подключают TinyMCE для редактирования контента.
- `ServiceOrderForm`: Форма заказа услуги (ФИО, Email, Телефон, Сообщение). Используется на странице прайс-листа.

### 5. `models.py`
Структура данных.

**Классы:**

#### `Portfolio(ActiveModel, SEOModel, TimestampModel)`
Универсальная модель для работы или услуги.
- **Ключевые поля:**
    - `is_service` (bool): Флаг. Если `True` — это услуга (попадет в прайс-лист), если `False` — работа портфолио.
    - `price`, `min_price`, `max_price`: Поля стоимости (для услуг).
    - `image`: Изображение работы или иконка услуги.
- **Методы:**
    - `increment_views()`: Увеличивает счетчик просмотров.

#### `ServiceOrder(TimestampModel)`
Модель заявки на услугу.
- **Поля:** Клиент (ФИО, контакты), выбранная услуга (`service`), сообщение, статус заявки.
- **Статусы:** Ожидает, В обработке, Завершено, Отменено.

### 6. `views.py`
Логика преставлений.

**Функции:**
- `portfolio_list(request)`: Отображает список **работ** (`is_service=False`). Пагинация по 9 элементов.
- `price_list(request)`: Отображает список **услуг** (`is_service=True`), сгруппированных по категориям.
    - **Обработка заказа:** Если отправлена форма `ServiceOrderForm`:
        1. Создает заказ `ServiceOrder`.
        2. Привязывает к заказу услугу по `service_id`.
        3. Выводит сообщение об успехе.
- `portfolio_detail(request, slug)`: Детальная страница работы или услуги.
    - Показывает "Похожие работы" (из той же категории и того же типа).

### 7. `urls.py`
Маршруты URL.
- `/` -> Список работ.
- `/prices/` -> Прайс-лист услуг и форма заказа.
- `/category/<slug>/` -> Фильтр работ по категории.
- `/<slug>/` -> Детальная страница.
