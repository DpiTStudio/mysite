# Документация приложения Reviews

Приложение `reviews` отвечает за сбор, модерацию и отображение отзывов клиентов.

## Обзор
Приложение предоставляет публичную форму для отправки отзывов (защищенную от спама) и административный интерфейс для их модерации. Все новые отзывы по умолчанию получают статус "На модерации" и не отображаются на сайте до одобрения администратором.

---

## Описание файлов

### 1. `admin.py`
Настройка административной панели.
- `ReviewAdmin`: Позволяет фильтровать отзывы по статусу (На модерации/Одобрено/Отклонено) и дате. Статус можно менять прямо в списке записей (`list_editable`).

### 2. `context_processors.py`
Глобальные данные.
- `latest_reviews(request)`: Возвращает 3 последние *одобренные* отзыва для вывода в общие блоки сайта (например, в слайдер отзывов на главной).

### 3. `forms.py`
Формы приложения.
- `ReviewForm`:
    - **Поля:** ФИО, Телефон, Email, Текст отзыва.
    - **Защита:** Использует `CaptchaField` для предотвращения автоматических спам-рассылок.
    - **Стилизация:** Все поля имеют класс `form-control` для Bootstrap.

### 4. `models.py`
Структура данных.

`Review(TimestampModel)`
- **Поля:**
    - `status`: Выбор из `pending` (На модерации), `approved` (Одобрено), `rejected` (Отклонено). По умолчанию `pending`.
    - `content`: Текст отзыва.
    - Контактные данные (имя, email, телефон).

### 5. `views.py`
Логика.
- `reviews_list(request)`: Показывает список отзывов.
    - **Важно:** Фильтрует записи, показывая только `status="approved"`.
- `create_review(request)`: Страница добавления отзыва.
    - При успешной валидации формы сохраняет отзыв.
    - Выводит флеш-сообщение (`messages.success`) о том, что отзыв отправлен на модерацию.

### 6. `urls.py`
Маршруты URL.
- `/` -> Список отзывов.
- `/create/` -> Форма добавления.
