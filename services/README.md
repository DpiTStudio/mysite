# Документация приложения Services

Приложение `services` реализует каталог услуг с возможностью детального описания и онлайн-заказа, интегрированного с личным кабинетом пользователя.

## Обзор
В отличие от упрощенного списка услуг в приложении `portfolio`, это приложение предоставляет расширенные возможности для описания предложений (технические требования, диапазоны цен, иконки). Заказы привязываются к аккаунту пользователя для отслеживания статуса.

---

## Описание файлов

### 1. `admin.py`
Настройка административной панели.
- `ServiceAdmin`: Управление услугами.
    - Фильтры по типу цены и активности.
    - Сортировка перетаскиванием (через поле `order`).
- `ServiceOrderAdmin`: Управление заказами.
    - Поля `created_at` и `updated_at` только для чтения.

### 2. `forms.py`
Формы.
- `ServiceOrderForm`: Форма заказа.
    - Поля: ФИО, Телефон, Email, Сообщение.
    - Стилизация: Bootstrap (`form-control`).

### 3. `models.py`
Структура данных.

**Классы:**

#### `Service(ActiveModel, SEOModel, TimestampModel)`
Модель услуги.
- **Поля:**
    - `icon`: Иконка услуги (SVG/PNG).
    - `technical_requirements`: HTML-поле для описания стека технологий.
    - **Цена**: Поддерживает два типа ценообразования (`price_type`):
        - `fixed`: Фиксированная цена (`price_fixed`).
        - `range`: Диапазон (`price_min` - `price_max`).
    - `currency`: Валюта (по умолчанию RUB).

#### `ServiceOrder(TimestampModel)`
Модель заказа.
- **Связи:** 
    - `service`: Заказанная услуга.
    - `user`: Привязка к пользователю (если заказчик авторизован).
- **Статусы:** Новый, В обработке, Выполнен, Отменен.

### 4. `views.py`
Представления (Class-Based Views).

**Классы:**
- `ServiceListView(ListView)`: Отображает каталог услуг.
    - Сортирует по полю `order`.
    - Фильтрует только активные.
- `ServiceDetailView(DetailView)`: Страница конкретной услуги.
    - **Особенность:** В контекст передается форма заказа `ServiceOrderForm`.
    - **Автозаполнение:** Если пользователь авторизован, форма предзаполняется его данными (ФИО, Email, Телефон из профиля).
- `ServiceOrderView(View)`: Обработчик отправки формы заказа (POST).
    - Создает заказ.
    - Если пользователь авторизован, привязывает заказ к его аккаунту.
    - Перенаправляет обратно на страницу услуги с сообщением об успехе.

### 5. `urls.py`
Маршруты URL.
- `/` -> `list`: Каталог.
- `/<slug>/` -> `detail`: Страница услуги.
- `order/<slug>/` -> `order`: POST-эндпоинт для отправки заказа.
